"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[3128,3275,8088],{63275:function(e,n,t){t.r(n),t.d(n,{UseMenuData:function(){return r}});var c=t(30270),u=t(48399),a=t(12902),o=t(1277),m=t(65736);const r=(0,c.Ue)(((e,n)=>({menuDataLoaded:!1,saving:!1,menu:[],menuChanged:!1,changedMenuType:"per_document",emptyMenuLink:"#",requiredDocuments:[],createdDocuments:[],genericDocuments:[],documentsNotInMenu:[],pageTypes:[],regions:[],fetchMenuData:async()=>{const n=await i(!1);let t=n.required_documents.filter((e=>e.page_id));e({menuDataLoaded:!0,emptyMenuLink:n.empty_menu_link,menu:n.menu,requiredDocuments:n.required_documents,genericDocuments:n.generic_documents_list,createdDocuments:t,pageTypes:n.page_types,documentsNotInMenu:n.documents_not_in_menu,regions:n.regions})},updateMenu:(n,t)=>{let c=isNaN(n)?"per_type":"per_document";e({menuType:c}),e("per_type"===c?(0,a.ZP)((e=>{let c=e.genericDocuments.findIndex((function(e,t){return e.page_id===n||e.type===n})),u=e.createdDocuments.findIndex((function(e,t){return e.page_id===n||e.type===n}));-1!==c&&(e.genericDocuments[c].menu_id=t,-1!==u&&(e.createdDocuments[u].menu_id=-1),e.menuChanged=!0)})):(0,a.ZP)((e=>{let c=e.genericDocuments.findIndex((function(e,t){return e.page_id===n||e.type===n})),u=e.createdDocuments.findIndex((function(e,t){return e.page_id===n||e.type===n}));-1!==u&&(e.createdDocuments[u].menu_id=t,-1!==c&&(e.genericDocuments[c].menu_id=-1),e.menuChanged=!0)})))},saveDocumentsMenu:async(t,c)=>{if(e({saving:!0}),n().menuChanged||t){let t={};t.genericDocuments=n().genericDocuments.filter((e=>e.can_region_redirect)),t.createdDocuments=n().createdDocuments;const a=u.doAction("save_documents_menu_data",t).then((n=>(e({saving:!1}),n))).catch((e=>{console.error(e)}));c&&o.toast.promise(a,{pending:(0,m.__)("Saving menu...","complianz-gdpr"),success:(0,m.__)("Menu saved","complianz-gdpr"),error:(0,m.__)("Something went wrong","complianz-gdpr")})}else c&&o.toast.info((0,m.__)("Settings have not been changed","complianz-gdpr"))}}))),i=()=>u.doAction("documents_menu_data",{generate:!1}).then((e=>e)).catch((e=>{console.error(e)}))},93128:function(e,n,t){t.r(n);var c=t(69307),u=t(63275),a=t(28088);n.default=(0,c.memo)((e=>{const{createdDocuments:n}=(0,u.UseMenuData)();let t=n.filter((n=>n.region===e.region.id));return 0===t.length?null:(0,c.createElement)("div",null,(0,c.createElement)("h3",{className:"cmplz-h4"},e.region.label),t.map(((e,n)=>(0,c.createElement)(a.default,{key:n,document:e}))))}))},28088:function(e,n,t){t.r(n);var c=t(69307),u=t(63275),a=t(65736);n.default=(0,c.memo)((e=>{const{menu:n,updateMenu:t}=(0,u.UseMenuData)();return(0,c.createElement)("div",{className:"cmplz-single-document-menu"},(0,c.createElement)("div",{className:"cmplz-document-menu-title"},e.document.title),(0,c.createElement)("select",{value:e.document.menu_id,onChange:n=>(n=>{t(e.document.page_id,n.target.value)})(n)},(0,c.createElement)("option",{value:-1,key:-1},(0,a.__)("Select a menu","complianz-gdpr")),n.map(((e,n)=>(0,c.createElement)("option",{key:n,value:e.id},e.label)))))}))}}]);