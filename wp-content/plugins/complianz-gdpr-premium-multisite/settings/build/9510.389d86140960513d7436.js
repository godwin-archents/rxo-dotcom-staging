"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[9510],{39510:function(e,t,i){i.r(t);var n=i(30270),o=i(12902),d=i(48399),c=i(75169);const s=(0,n.Ue)(((e,t)=>({documentsLoaded:!1,savedDocument:{},conclusions:[],region:"",fileName:"",fetching:!1,updating:!1,loadingFields:!1,documents:[],regions:[],fields:[],editDocumentId:!1,resetEditDocumentId:t=>{e({editDocumentId:!1,region:""})},editDocument:async t=>{e({updating:!0}),await d.doAction("load_databreach_report",{id:t}).then((t=>{e({fields:t.fields,region:t.region,updating:!1,fileName:t.file_name})})).catch((e=>{console.error(e)})),e({editDocumentId:t})},setRegion:t=>{e({region:t})},updateField:(i,n)=>{let d=!1,s=!1;e((0,o.ZP)((e=>{e.fields.forEach((function(e,t){e.id===i&&(s=t,d=!0)})),!1!==s&&(e.fields[s].value=n)})));let a=(0,c.updateFieldsListWithConditions)(t().fields);e({fields:a})},save:async i=>{e({updating:!0});let n=t().editDocumentId,o=0;await d.doAction("save_databreach_report",{fields:t().fields,region:i,post_id:n}).then((t=>(o=t.post_id,e({updating:!1,conclusions:t.conclusions}),t))).catch((e=>{console.error(e)})),await t().fetchData();let c=t().documents.filter((e=>e.id===o));c.length>0&&e({savedDocument:c[0]})},deleteDocuments:async i=>{let n=t().documents.filter((e=>i.includes(e.id)));e((e=>({documents:e.documents.filter((e=>!i.includes(e.id)))})));let o={};o.documents=n,await d.doAction("delete_databreach_report",o).then((e=>e)).catch((e=>{console.error(e)}))},fetchData:async()=>{if(t().fetching)return;e({fetching:!0});const{documents:i,regions:n}=await d.doAction("get_databreach_reports",{}).then((e=>e)).catch((e=>{console.error(e)}));e((e=>({documentsLoaded:!0,documents:i,regions:n,fetching:!1})))},fetchFields:async t=>{let i={region:t};e({loadingFields:!0});const{fields:n}=await d.doAction("get_databreach_report_fields",i).then((e=>e)).catch((e=>{console.error(e)}));let o=(0,c.updateFieldsListWithConditions)(n);e((e=>({fields:o,loadingFields:!1})))}})));t.default=s}}]);