"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[2201,9511],{82201:function(e,n,t){t.r(n);var o=t(69307),c=t(65736),a=t(9511),r=t(23361);n.default=(0,o.memo)((e=>{let{label:n,field:t}=e;const{generateProofOfConsent:d,generating:l}=(0,a.default)();return(0,o.createElement)("div",{className:"cmplz-field-button"},(0,c.__)("Create Proof of Consent","complianz-gdpr"),(0,o.createElement)("button",{disabled:l,className:"button button-default cmplz-field-button",onClick:()=>d()},(0,c.__)("Generate","complianz-gdpr"),l&&(0,o.createElement)(r.default,{name:"loading",color:"grey"})))}))},9511:function(e,n,t){t.r(n);var o=t(30270),c=t(48399);const a=(0,o.Ue)(((e,n)=>({documentsLoaded:!1,fetching:!1,generating:!1,documents:[],downloadUrl:"",regions:[],fields:[],deleteDocuments:async t=>{let o=n().documents.filter((e=>t.includes(e.id)));e((e=>({documents:e.documents.filter((e=>!t.includes(e.id)))})));let a={};a.documents=o,await c.doAction("delete_proof_of_consent_documents",a).then((e=>e)).catch((e=>{console.error(e)}))},generateProofOfConsent:async()=>{e({generating:!0}),await c.doAction("generate_proof_of_consent",{}).then((e=>e)).catch((e=>{console.error(e)})),await n().fetchData(),e({generating:!1})},fetchData:async()=>{if(n().fetching)return;e({fetching:!0});const{documents:t,regions:o,download_url:a}=await c.doAction("get_proof_of_consent_documents",{}).then((e=>e)).catch((e=>{console.error(e)}));e((e=>({documentsLoaded:!0,documents:t,regions:o,downloadUrl:a,fetching:!1})))}})));n.default=a}}]);