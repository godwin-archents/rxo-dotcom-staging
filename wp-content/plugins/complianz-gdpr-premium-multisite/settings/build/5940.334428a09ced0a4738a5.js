"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[5940,3667],{75940:function(e,t,n){n.r(t);var a=n(69307),o=n(55609),c=n(56293),l=n(23361),i=n(65736),r=n(43667),p=n(82485);t.default=(0,a.memo)((function(){const{removeHelpNotice:e,addHelpNotice:t,fetchFieldsData:n,showSavedSettingsNotice:s}=(0,c.default)(),{selectedSubMenuItem:m}=(0,p.default)(),[d,u]=(0,a.useState)(!1),[g,_]=(0,a.useState)(!0),[f,z]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{d&&("application/json"!==d.type?(_(!0),t("import_settings","warning",(0,i.__)("You can only upload .json files","complianz-gdpr"),(0,i.__)("Incorrect extension","complianz-gdpr"),!1)):(_(!1),e("import_settings")))}),[d]),(0,a.createElement)("div",{className:"cmplz-import-form"},(0,a.createElement)("div",{className:"cmplz-import-button-container"},d&&d.name,(0,a.createElement)(o.FormFileUpload,{accept:"",icon:(0,a.createElement)(l.default,{name:"upload",color:"black"}),onChange:e=>u(e.currentTarget.files[0])},(0,i.__)("Select file","complianz-gdpr")),(0,a.createElement)("button",{disabled:g,className:"button button-default",onClick:e=>(_(!0),z(!0),void(0,r.upload)("import_settings",d).then((e=>(e.data.success?n(m).then((()=>{s((0,i.__)("Settings imported","complianz-gdpr"))})):t("import_settings","warning",(0,i.__)("You can only upload .json files","complianz-gdpr"),(0,i.__)("Incorrect extension","complianz-gdpr"),!1),z(!1),u(!1),!0))).catch((e=>{console.error(e)})))},(0,i.__)("Import","complianz-gdpr"),f&&(0,a.createElement)(l.default,{name:"loading",color:"grey"}))))}))},43667:function(e,t,n){n.r(t),n.d(t,{upload:function(){return c}});var a=n(9669),o=n.n(a);const c=(e,t,n)=>{let a=new FormData;return a.append("data",t),void 0!==n&&a.append("details",JSON.stringify(n)),o().post(cmplz_settings.admin_url+"?page=complianz&cmplz_upload_file=1&action="+e,a,{headers:{"Content-Type":"multipart/form-data","X-WP-Nonce":cmplz_settings.nonce}})}}}]);