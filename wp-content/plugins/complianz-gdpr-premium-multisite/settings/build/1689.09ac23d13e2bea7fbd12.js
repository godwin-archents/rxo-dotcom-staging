"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[1689,8667,161],{18667:function(e,t,r){r.r(t);var a=r(30270),n=r(49546),o=r(69119),s=r(7069),c=r(83894);const d=(0,a.Ue)((e=>({startDate:(0,n.default)((0,o.default)((0,s.Z)(new Date,7)),"yyyy-MM-dd"),setStartDate:t=>e((e=>({startDate:t}))),endDate:(0,n.default)((0,c.default)((0,s.Z)(new Date,1)),"yyyy-MM-dd"),setEndDate:t=>e((e=>({endDate:t}))),range:"last-7-days",setRange:t=>e((e=>({range:t})))})));t.default=d},51689:function(e,t,r){r.r(t);var a=r(69307),n=r(65736),o=r(80161),s=r(23361),c=r(18667);t.default=(0,a.memo)((()=>{const{noData:e,startExport:t,exportLink:d,fetchExportRecordsOfConsentProgress:l,generating:i,progress:u}=(0,o.default)(),[g,p]=(0,a.useState)(null),{startDate:f,endDate:m}=(0,c.default)();return(0,a.useEffect)((()=>{Promise.all([r.e(6900),r.e(6507),r.e(327),r.e(6717)]).then(r.bind(r,6717)).then((e=>{let{default:t}=e;p((()=>t))}))}),[]),(0,a.useEffect)((()=>{l(!0)}),[]),(0,a.useEffect)((()=>{u<100&&i&&l(!1,f,m)}),[u]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"cmplz-field-button cmplz-table-header"},(0,a.createElement)("div",{className:"cmplz-table-header-controls"},g&&(0,a.createElement)(g,null),(0,a.createElement)("button",{disabled:i,className:"button button-default cmplz-field-button",onClick:()=>t()},(0,n.__)("Export to CSV","complianz-gdpr"),i&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(s.default,{name:"loading",color:"grey"}),"Â ",u,"%")))),u>=100&&(""!==d||e)&&(0,a.createElement)("div",{className:"cmplz-selected-document"},!e&&(0,n.__)("Your Records Of Consent Export has been completed.","complianz-gdpr"),e&&(0,n.__)("Your selection does not contain any data.","complianz-gdpr"),(0,a.createElement)("div",{className:"cmplz-selected-document-controls"},!e&&(0,a.createElement)("a",{className:"button button-default",download:!0,href:d},(0,n.__)("Download","complianz-gdpr")))))}))},80161:function(e,t,r){r.r(t);var a=r(30270),n=r(48399);const o=(0,a.Ue)(((e,t)=>({recordsLoaded:!1,fetching:!1,generating:!1,progress:!1,records:[],exportLink:"",downloadUrl:"",regions:[],fields:[],noData:!1,totalRecords:0,searchValue:"",setSearchValue:t=>e({searchValue:t}),paginationPerPage:10,pagination:{currentPage:1},setPagination:t=>e({pagination:t}),orderBy:"ID",setOrderBy:t=>e({orderBy:t}),order:"DESC",setOrder:t=>e({order:t}),deleteRecords:async r=>{let a=t().records.filter((e=>r.includes(e.id)));e((e=>({records:e.records.filter((e=>!r.includes(e.id)))})));let o={};o.records=a,await n.doAction("delete_records_of_consent",o).then((e=>e)).catch((e=>{console.error(e)}))},fetchData:async()=>{if(t().fetching)return;e({fetching:!0});let r={};r.per_page=t().paginationPerPage,r.page=t().pagination.currentPage,r.order=t().order.toUpperCase(),r.orderBy=t().orderBy,r.search=t().searchValue;const{records:a,totalRecords:o,regions:s,download_url:c}=await n.doAction("get_records_of_consent",r).then((e=>e)).catch((e=>{console.error(e)}));e((()=>({recordsLoaded:!0,records:a,regions:s,totalRecords:o,downloadUrl:c,fetching:!1})))},startExport:async()=>{e({generating:!0,progress:0,exportLink:""})},fetchExportRecordsOfConsentProgress:async(t,r,a)=>{(t=void 0!==t&&t)||e({generating:!0});let o={};o.startDate=r,o.endDate=a,o.statusOnly=t;const{progress:s,exportLink:c,noData:d}=await n.doAction("export_records_of_consent",o).then((e=>e)).catch((e=>{console.error(e)}));let l=!1;s<100&&(l=!0),e({progress:s,exportLink:c,generating:l,noData:d})}})));t.default=o}}]);